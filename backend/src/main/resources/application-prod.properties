# ============================
# Spring Application Name
# ============================
spring.application.name=makgora

# ============================
# Server Configuration
# ============================
# Render에서는 $PORT 환경 변수를 사용하므로 동적 포트 설정
server.address=0.0.0.0
server.port=${PORT:8080}  # 기본값 8080, Render가 포트 할당

# ============================
# MySQL Database Connection
# ============================
# Render 환경 변수(DB_HOST, DB_PORT, DB_NAME, DB_USER, DB_PASSWORD) 사용
spring.datasource.url=jdbc:mysql://${DB_HOST}:${DB_PORT}/${DB_NAME}?serverTimezone=Asia/Seoul&characterEncoding=UTF-8
spring.datasource.username=${DB_USER}
spring.datasource.password=${DB_PASSWORD}
spring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver

# ============================
# JPA Settings
# ============================
spring.jpa.hibernate.ddl-auto=update  # 배포 시 테이블 자동 업데이트
spring.jpa.show-sql=false              
spring.jpa.properties.hibernate.format_sql=true
# spring.jpa.database-platform=org.hibernate.dialect.MySQL8Dialect  # 필요 시 사용

# ============================
# Logging
# ============================
logging.level.org.hibernate.SQL=debug
logging.level.org.hibernate.type.descriptor.sql=INFO

# ============================
# Redis Configuration
# ============================
# Render 환경 변수(REDIS_HOST, REDIS_PORT, REDIS_PASSWORD) 사용
spring.data.redis.host=${REDIS_HOST}
spring.data.redis.port=${REDIS_PORT}
spring.data.redis.password=${REDIS_PASSWORD}   # 비밀번호 있는 경우
spring.data.redis.timeout=6000
spring.data.redis.repositories.enabled=false
spring.data.redis.lettuce.pool.max-active=20
spring.data.redis.lettuce.pool.max-idle=8
spring.data.redis.lettuce.pool.min-idle=0
spring.data.redis.lettuce.pool.max-wait=-1

# ============================
# JWT Secret Key
# ============================
# 최소 32바이트 이상, 환경 변수로 관리 권장
jwt.secret=${JWT_SECRET}

# ============================
# Email SMTP (Gmail 예시)
# ============================
spring.mail.host=smtp.gmail.com
spring.mail.port=587
spring.mail.username=${SMTP_USERNAME}    # 환경 변수로 관리
spring.mail.password=${SMTP_PASSWORD}    # 앱 비밀번호 사용
spring.mail.properties.mail.smtp.auth=true
spring.mail.properties.mail.smtp.starttls.enable=true
spring.mail.properties.mail.smtp.timeout=5000
spring.mail.properties.mail.smtp.connectiontimeout=5000

# ============================
# Cloudinary Configuration
# ============================
cloudinary.cloud-name=${CLOUDINARY_CLOUD_NAME}
cloudinary.api-key=${CLOUDINARY_API_KEY}
cloudinary.api-secret=${CLOUDINARY_API_SECRET}

# ============================
# File Upload Settings
# ============================
spring.servlet.multipart.enabled=true
spring.servlet.multipart.max-file-size=50MB
spring.servlet.multipart.max-request-size=50MB
spring.servlet.multipart.file-size-threshold=2KB

# ============================
# Python API URL
# ============================
python.api.url=${PYTHON_API_URL}

# ============================
# Python API URL
# ============================
worker.url=${PYTHON_API_URL}

# ============================
# Application Custom Settings
# ============================
app.runRssOnStartup=true
